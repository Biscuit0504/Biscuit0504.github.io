(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{108:function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"a",(function(){return i}));var r=t(22),a=t(110);function o(){var e=Object(r.default)().siteConfig,n=(e=void 0===e?{}:e).baseUrl,t=void 0===n?"/":n,o=e.url;return{withBaseUrl:function(e,n){return function(e,n,t,r){var o=void 0===r?{}:r,i=o.forcePrependBaseUrl,c=void 0!==i&&i,u=o.absolute,s=void 0!==u&&u;if(!t)return t;if(t.startsWith("#"))return t;if(Object(a.b)(t))return t;if(c)return n+t;var l=t.startsWith(n)?t:n+t.replace(/^\//,"");return s?e+l:l}(o,t,e,n)}}}function i(e,n){return void 0===n&&(n={}),(0,o().withBaseUrl)(e,n)}},109:function(e,n,t){"use strict";t.d(n,"a",(function(){return p})),t.d(n,"b",(function(){return d}));var r=t(0),a=t.n(r);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function u(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=a.a.createContext({}),l=function(e){var n=a.a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):c(c({},n),e)),t},p=function(e){var n=l(e.components);return a.a.createElement(s.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},f=a.a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,s=u(e,["components","mdxType","originalType","parentName"]),p=l(t),f=r,d=p["".concat(i,".").concat(f)]||p[f]||m[f]||o;return t?a.a.createElement(d,c(c({ref:n},s),{},{components:t})):a.a.createElement(d,c({ref:n},s))}));function d(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,i=new Array(o);i[0]=f;var c={};for(var u in n)hasOwnProperty.call(n,u)&&(c[u]=n[u]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var s=2;s<o;s++)i[s]=t[s];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,t)}f.displayName="MDXCreateElement"},110:function(e,n,t){"use strict";function r(e){return!0===/^(\w*:|\/\/)/.test(e)}function a(e){return void 0!==e&&!r(e)}t.d(n,"b",(function(){return r})),t.d(n,"a",(function(){return a}))},87:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return i})),t.d(n,"metadata",(function(){return c})),t.d(n,"toc",(function(){return u})),t.d(n,"default",(function(){return l}));var r=t(3),a=t(7),o=(t(0),t(109)),i=(t(108),{slug:"wxMiniApi",title:"\u5fae\u4fe1\u5c0f\u7a0b\u5e8f \u63a5\u53e3\u8bf7\u6c42\u5c01\u88dd",author:"\u5c0f\u732a\u61a8\u61a8",author_title:"\u524d\u7aef\u5de5\u7a0b\u5e08",tags:["\u524d\u7aef"]}),c={permalink:"/wxMiniApi",source:"@site/blog/2020-11-27-wxMiniApi.md",description:"\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u4e2d\u8fdb\u884c\u5f00\u53d1\u65f6,\u7f51\u7edc\u8bf7\u6c42\u662f\u5fc5\u4e0d\u53ef\u5c11\u7684,\u5f53\u6211\u4eec\u7684\u9875\u9762\u8d8a\u6765\u8d8a\u591a\u7684\u65f6\u5019,\u9700\u8981\u6211\u4eec\u7ef4\u62a4\u7684\u63a5\u53e3\u6570\u91cf\u4e5f\u5c31\u589e\u591a\u4e86,\u90a3\u4e48\u4eca\u5929\u5c31\u8bb0\u5f55\u4e00\u4e0b,\u5bf9\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u7684\u63a5\u53e3\u5c01\u88c5",date:"2020-11-27T00:00:00.000Z",tags:[{label:"\u524d\u7aef",permalink:"/tags/\u524d\u7aef"}],title:"\u5fae\u4fe1\u5c0f\u7a0b\u5e8f \u63a5\u53e3\u8bf7\u6c42\u5c01\u88dd",readingTime:1.445,truncated:!0,prevItem:{title:"\u524d\u7aef\u9762\u8bd5\u8bd5\u98981",permalink:"/mianshi"},nextItem:{title:"ffmpeg\u547d\u4ee4",permalink:"/ffmpeg"}},u=[{value:"\u63a5\u53e3\u5730\u5740",id:"\u63a5\u53e3\u5730\u5740",children:[]},{value:"\u8bf7\u6c42\u65b9\u6cd5",id:"\u8bf7\u6c42\u65b9\u6cd5",children:[]}],s={toc:u};function l(e){var n=e.components,t=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},s,t,{components:n,mdxType:"MDXLayout"}),Object(o.b)("p",null,"\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u4e2d\u8fdb\u884c\u5f00\u53d1\u65f6,\u7f51\u7edc\u8bf7\u6c42\u662f\u5fc5\u4e0d\u53ef\u5c11\u7684,\u5f53\u6211\u4eec\u7684\u9875\u9762\u8d8a\u6765\u8d8a\u591a\u7684\u65f6\u5019,\u9700\u8981\u6211\u4eec\u7ef4\u62a4\u7684\u63a5\u53e3\u6570\u91cf\u4e5f\u5c31\u589e\u591a\u4e86,\u90a3\u4e48\u4eca\u5929\u5c31\u8bb0\u5f55\u4e00\u4e0b,\u5bf9\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u7684\u63a5\u53e3\u5c01\u88c5"),Object(o.b)("h2",{id:"\u63a5\u53e3\u5730\u5740"},"\u63a5\u53e3\u5730\u5740"),Object(o.b)("p",null,"\u9996\u5148\u5b9a\u4e49\u63a5\u53e3\u5730\u5740"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-JavaScript"}),"const host = 'http://www.iqzhan.com'; // \u63a5\u53e3\u5730\u5740\nconst domain = '/os_wxapi/v1/'; // \u63a5\u53e3\u76f8\u540c\u7684\u8def\u5f84\u533a\u57df\n\n// \u63a5\u53e3\u5730\u5740\u62fc\u63a5\nconst urls = {\n  home: host + domain + 'home', // \u83b7\u53d6\u9996\u9875\u63a5\u53e3\n  article: host + domain + 'article', // \u83b7\u53d6\u6587\u7ae0\u8be6\u60c5\u63a5\u53e3\n}\nexport default urls;\n\n")),Object(o.b)("p",null,"\u5b9a\u4e49\u63a5\u53e3\u5730\u5740\uff0c\u5b9a\u4e49\u63a5\u53e3\u76f8\u540c\u8def\u5f84\uff08",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"http://www.iqzhan.com/os_wxapi/v1/home%EF%BC%89%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%88%86%E5%BC%80%E5%AE%9A%E4%B9%89%EF%BC%8C%E5%9B%A0%E4%B8%BA%E8%AF%B4%E4%B8%8D%E5%87%86%E9%A1%B5%E9%9D%A2%E9%87%8C%E9%9D%A2%E5%8F%AA%E8%8E%B7%E5%8F%96host%E7%9A%84%E7%BD%91%E5%9D%80%E9%9C%80%E6%B1%82%EF%BC%8C%E5%BD%93%E7%84%B6%E4%BD%A0%E4%B9%9F%E5%8F%AF%E4%BB%A5%E4%B8%A4%E4%B8%AA%E7%9B%B4%E6%8E%A5%E6%8B%BC%E6%8E%A5%E4%B8%80%E8%B5%B7%E3%80%82"}),"http://www.iqzhan.com/os_wxapi/v1/home\uff09\uff0c\u4e3a\u4ec0\u4e48\u8981\u5206\u5f00\u5b9a\u4e49\uff0c\u56e0\u4e3a\u8bf4\u4e0d\u51c6\u9875\u9762\u91cc\u9762\u53ea\u83b7\u53d6host\u7684\u7f51\u5740\u9700\u6c42\uff0c\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u4e24\u4e2a\u76f4\u63a5\u62fc\u63a5\u4e00\u8d77\u3002")),Object(o.b)("h2",{id:"\u8bf7\u6c42\u65b9\u6cd5"},"\u8bf7\u6c42\u65b9\u6cd5"),Object(o.b)("p",null,"\u63a5\u4e0b\u6765\u5728utils\u6587\u4ef6\u4e0b\u65b0\u5efa\u6587\u4ef6\u201crequest.js\u201d\uff0c\u586b\u5199\u4ee5\u4e0b\u4ee3\u7801"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-JavaScript"}),"// \u5f15\u5165\u63a5\u53e3\nimport urls from './http';\n\n// \u9ed8\u8a8d\u8bf7\u6c42\u5934\uff08\u53ef\u81ea\u884c\u6dfb\u52a0token\u7b49\uff09\nvar header = {\n  'content-type': 'application/x-www-form-urlencoded',\n}\n\n/**\n * function: \u5c01\u88c5\u7f51\u7edc\u8bf7\u6c42\n * @url     URL\u5730\u5740\n * @params  \u8bf7\u6c42\u53c2\u6570\n * @method  GET/POST\uff08\u8bf7\u6c42\u65b9\u5f0f\uff09\n * @resolve \u6210\u529f\u56de\u8c03\n * @reject  \u5931\u8d25\u56de\u8c03\n */\nfunction request(url, params, method, resolve, reject) {\n  wx.showLoading({\n    title: \"\u52a0\u8f7d\u4e2d...\",\n  })\n  wx.request({\n    url: url, // \u63a5\u53e3\u5730\u5740\n    data: dealParams(params), // \u8acb\u6c42\u53c3\u6578\n    method: method, // \u8acb\u6c42\u65b9\u5f0f\n    header: header, // \u8acb\u6c42\u982d\n    success: (res) =>{\n      wx.hideLoading(); // \u95dc\u9589\u52a0\u8f09\u63d0\u793a\n      if (res.data) {\n        // \u5224\u65b7\u8acb\u6c42\u6210\u529f\u7684\u72c0\u614b\u78bc\n        if (res.data.code == 100000) {\n          resolve(res.data);\n        } else {\n          reject(res.data);\n        }\n      }\n    },\n    fail: function(error) {\n      reject(\"\");\n    }\n  })\n}\n\n/**\n * function: \u8acb\u6c42\u6642\u6dfb\u52a0\u5fc5\u5e36\u7684\u56fa\u5b9a\u53c3\u6578\uff0c\u6c92\u6709\u9700\u6c42\u7121\u9700\u6dfb\u52a0\n * @params   \u8bf7\u6c42\u53c2\u6570\n*/\nfunction dealParams(params) {\n  return params = Object.assign({}, params, {\n    // id: '666',\n  })\n}\n\nconst apiService = {\n  // POST\u8acb\u6c42\n  REQUESTPOST(url, params) {\n    return new Promise((resolve,reject) => {\n      request(url, params, \"POST\", resolve, reject);\n    })\n  },\n  // GET\u8acb\u6c42\n  REQUESTGET(url, params) {\n    return new Promise((resolve,reject) => {\n      request(url, params, \"GET\", resolve, reject);\n    })\n  }\n}\n\n// \u5916\u90e8\u8abf\u7528\u63a5\u53e3\nmodule.exports = {\n  getHome: (params) => { // \u83b7\u53d6\u9996\u9801\u63a5\u53e3\n    return new Promise((resolve,reject)=> {\n      resolve(apiService.REQUESTGET(urls.home,params))\n    })\n  },\n  getArticle: (params) => { // \u83b7\u53d6\u6587\u7ae0\u8a73\u60c5\u63a5\u53e3\n    return new Promise((resolve,reject)=> {\n      resolve(apiService.REQUESTGET(urls.article,params))\n    })\n  },\n}\n\n")),Object(o.b)("p",null,"\u4f7f\u7528\uff0c\u5728\u9700\u8981\u8c03\u7528\u7684\u9875\u9762js\u4e2d\uff0c\u5982\u4e0b\u4ee3\u7801"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-JavaScript"}),"// \u5f15\u5165\u9700\u8981\u4f7f\u7528\u7684\u63a5\u53e3\nimport { getHome,getArticle } from '../../utils/request.js'\n\nPage({\n  getData: function (e) {\n    // \u83b7\u53d6\u9996\u9801\u63a5\u53e3\n    getHome({\n      page: '1'\n    }).then(res => {\n      console.log(res)\n    })\n    // \u83b7\u53d6\u6587\u7ae0\u8a73\u60c5\u63a5\u53e3\n    getArticle({\n      id: '1527'\n    }).then(res => {\n      console.log(res)\n    })\n  },\n  onLoad: function () {\n    this.getData();\n  },\n})\n\n")),Object(o.b)("p",null,"\u4ee5\u4e0a\u5c31\u662f\u5c0f\u7a0b\u5e8f\u5c01\u88c5\u7684\u63a5\u53e3\u8bf7\u6c42\u4ee5\u53ca\u5b8c\u6574\u4ee3\u7801"))}l.isMDXComponent=!0}}]);